# 競馬予想システム v3.0 - 使い方ガイド

## 概要

このシステムは、レースデータJSONファイルを入力として、2種類の評価（実力評価・期待値評価）を行い、購入プラン推奨まで提供する競馬予想ソフトです。

## 必要なもの

- Python 3.7以上
- 必要なパッケージ（requirements.txtを参照）
- レースデータのJSONファイル

## インストール

```bash
pip install -r requirements.txt
```

## 基本的な使い方

### 1. レースデータJSONファイルを用意

JSONファイルは以下の構造である必要があります：

```json
{
  "race_info": {
    "name": "レース名",
    "date": "2025-10-12",
    "venue": "東京",
    "distance": 2000
  },
  "horses": [
    {
      "number": 1,
      "name": "馬名",
      "odds": 5.0,
      "jockey": "騎手名",
      "weight": 55.0,
      "recent_results": [
        {
          "finish": 1,
          "runners": 16,
          "distance": 2000,
          "venue": "東京"
        }
      ]
    }
  ]
}
```

### 2. システムを実行

```bash
python main.py data/race_data_20251012_アイルランドトロフィー.json
```

### 3. 結果を確認

実行後、以下のファイルが生成されます：

- `output_analysis/software_analysis.txt` - 人間向けレポート
- `output_analysis/unified_race_data.json` - 機械向け統合データ

## 出力される評価

### 実力評価（本命・対抗用）
- 過去成績重視
- コース適性重視
- 実績ベースの評価

### 期待値評価（穴馬用）
- オッズ妙味重視
- 穴馬候補の発掘
- リスク・リターンのバランス

## トラブルシューティング

### エラー: ファイルが見つかりません
→ JSONファイルのパスが正しいか確認してください

### エラー: JSONの読み込みに失敗
→ JSONファイルの構造が正しいか確認してください

### 文字化けが発生する
→ システムはUTF-8エンコーディングを前提としています

## ヘルプの表示

```bash
python main.py --help
```

## サンプルデータ

`data/`ディレクトリには、以下のサンプルデータがあります：

- `race_data_20251012_アイルランドトロフィー.json` - アイルランドトロフィーのデータ
- `race_data_20251005_京都大賞典.json` - 京都大賞典のデータ

## その他

- ログは`logs/keiba_system.log`に記録されます
- 問題が発生した場合は、このログファイルを確認してください
